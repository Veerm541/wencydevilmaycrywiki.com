<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Character Details | Devil May Cry Wiki</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<style>
  #character-detail {
    background: linear-gradient(to bottom, rgba(10, 10, 10, 0.9), rgba(26, 26, 26, 0.95));
    padding: 2rem 1rem;
    color: var(--white);
    min-height: 100vh;
    position: relative;
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    z-index: 1;
  }

  #character-detail::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(10, 10, 10, 0.85);
    z-index: -1;
  }

  /* Character-specific background images */
  #character-detail.vergil {
    background-image: url('assets/images/bg.gif');
    color: #e0e0e0;
  }

  #character-detail.vergil .character-header {
    border-color: #0066cc;
    box-shadow: 0 0 15px rgba(0, 102, 204, 0.3);
  }

  #character-detail.vergil h1,
  #character-detail.vergil h2 {
    color: #0066cc;
    text-shadow: 0 0 8px rgba(0, 102, 204, 0.5);
  }

  #character-detail.vergil .style-rating {
    color: #0066cc;
    border-color: #0066cc;
    box-shadow: 0 0 10px #0066cc;
  }

  #character-detail.dante {
    background-image: url('assets/images/Dantee.gif');
    color: #f0f0f0;
  }

  #character-detail.dante .character-header {
    border-color: #ff2a2a;
    box-shadow: 0 0 15px rgba(255, 42, 42, 0.3);
  }

  #character-detail.dante h1,
  #character-detail.dante h2 {
    color: #ff2a2a;
    text-shadow: 0 0 8px rgba(255, 42, 42, 0.5);
  }

  #character-detail.dante .style-ranking {
    color: #ff2a2a;
    border-color: #ff2a2a;
    box-shadow: 0 0 10px #ff2a2a;
  }


  #character-detail.nero {
    background-image: url('assets/images/nero.webp');
    color: #d0d0d0;
  }

  #character-detail.nero .character-header {
    border-color: #0077ff;
    box-shadow: 0 0 15px rgba(0, 119, 255, 0.3);
  }

  #character-detail.nero h1,
  #character-detail.nero h2 {
    color: #0077ff;
    text-shadow: 0 0 8px rgba(0, 119, 255, 0.5);
  }

  #character-detail.nero .style-ranking {
    color: #0077ff;
    border-color: #0077ff;
    box-shadow: 0 0 10px #0077ff;
  }


  #character-detail.v {
    background-image: url('assets/images/Vbg.webp');
    /* Updated */
    color: #c8c8c8;
  }

  #character-detail.v .character-header {
    border-color: #7a7a7a;
    box-shadow: 0 0 15px rgba(122, 122, 122, 0.3);
  }

  #character-detail.v h1,
  #character-detail.v h2 {
    color: #7a7a7a;
    text-shadow: 0 0 8px rgba(122, 122, 122, 0.5);
  }

  #character-detail.v .style-ranking {
    color: #7a7a7a;
    border-color: #7a7a7a;
    box-shadow: 0 0 10px #7a7a7a;
  }


  #character-detail.lady {
    background-image: url('assets/images/ladybg.webp');
    /* Updated */
    color: #eaeaea;
  }

  #character-detail.lady .character-header {
    border-color: #b30000;
    box-shadow: 0 0 15px rgba(179, 0, 0, 0.3);
  }

  #character-detail.lady h1,
  #character-detail.lady h2 {
    color: #b30000;
    text-shadow: 0 0 8px rgba(179, 0, 0, 0.5);
  }

  #character-detail.lady .style-ranking {
    color: #b30000;
    border-color: #b30000;
    box-shadow: 0 0 10px #b30000;
  }


  #character-detail.trish {
    background-image: url('assets/images/Trishbg.webp');
    color: #f0e68c;
  }

  #character-detail.trish .character-header {
    border-color: #ffd700;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
  }

  #character-detail.trish h1,
  #character-detail.trish h2 {
    color: #ffd700;
    text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
  }

  #character-detail.trish .style-ranking {
    color: #ffd700;
    border-color: #ffd700;
    box-shadow: 0 0 10px #ffd700;
  }

  #character-detail.nico {
    background-image: url('assets/images/Nicobg.webp');
    color: #d2691e;
  }

  #character-detail.nico .character-header {
    border-color: #ff8c00;
    box-shadow: 0 0 15px rgba(255, 140, 0, 0.3);
  }

  #character-detail.nico h1,
  #character-detail.nico h2 {
    color: #ff8c00;
    text-shadow: 0 0 8px rgba(255, 140, 0, 0.5);
  }

  #character-detail.nico .style-ranking {
    color: #ff8c00;
    border-color: #ff8c00;
    box-shadow: 0 0 10px #ff8c00;
  }

  #character-detail.mundus {
    background-image: url('assets/images/mundusbg.webp');
    color: #d0d0d0;
  }

  #character-detail.mundus .character-header {
    border-color: #9400d3;
    box-shadow: 0 0 15px rgba(148, 0, 211, 0.3);
  }

  #character-detail.mundus h1,
  #character-detail.mundus h2 {
    color: #9400d3;
    text-shadow: 0 0 8px rgba(148, 0, 211, 0.5);
  }

  #character-detail.mundus .style-ranking {
    color: #9400d3;
    border-color: #9400d3;
    box-shadow: 0 0 10px #9400d3;
  }

  #character-detail.urizen {
    background-image: url('assets/images/urizenbg.webp');
    color: #800000;
  }

  #character-detail.urizen .character-header {
    border-color: #8b0000;
    box-shadow: 0 0 15px rgba(139, 0, 0, 0.3);
  }

  #character-detail.urizen h1,
  #character-detail.urizen h2 {
    color: #8b0000;
    text-shadow: 0 0 8px rgba(139, 0, 0, 0.5);
  }

  #character-detail.urizen .style-ranking {
    color: #8b0000;
    border-color: #8b0000;
    box-shadow: 0 0 10px #8b0000;
  }

  #character-detail.sparda {
    background-image: url('assets/images/spardabg.webp');
    color: #8b4513;
  }

  #character-detail.sparda .character-header {
    border-color: #ff4500;
    box-shadow: 0 0 15px rgba(255, 69, 0, 0.3);
  }

  #character-detail.sparda h1,
  #character-detail.sparda h2 {
    color: #ff4500;
    text-shadow: 0 0 8px rgba(255, 69, 0, 0.5);
  }

  #character-detail.sparda .style-ranking {
    color: #ff4500;
    border-color: #ff4500;
    box-shadow: 0 0 10px #ff4500;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .character-header {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    margin-bottom: 1.5rem;
    align-items: center;
    background: rgba(26, 26, 26, 0.7);
    padding: 1.5rem;
    border-radius: 10px;
    border: 1px solid var(--crimson);
    box-shadow: 0 0 20px rgba(229, 10, 10, 0.2);
  }

  .character-image {
    position: relative;
    flex: 1;
    min-width: 300px;
    max-width: 400px;
    height: 400px;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    border: 2px solid var(--gold);
  }

  .character-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: top;
    transition: transform 0.5s ease;
  }

  .character-image:hover img {
    transform: scale(1.05);
  }

  .style-rating {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: rgba(0, 0, 0, 0.7);
    color: var(--gold);
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: bold;
    border: 2px solid var(--crimson);
    box-shadow: 0 0 10px var(--crimson);
  }

  .character-info {
    flex: 2;
    min-width: 300px;
  }

  .character-info h1 {
    font-size: 2.5rem;
    color: var(--gold);
    margin-bottom: 0.5rem;
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
  }

  .role {
    color: var(--crimson-light);
    font-size: 1.2rem;
    margin-bottom: 1.5rem;
    font-style: italic;
  }

  .stats {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    margin-top: 2rem;
  }

  .stat-item {
    background: rgba(26, 26, 26, 0.8);
    padding: 1rem;
    border-radius: 8px;
    flex: 1;
    min-width: 150px;
    display: flex;
    align-items: center;
    gap: 0.8rem;
    border-left: 4px solid var(--crimson);
    transition: all 0.3s ease;
  }

  .stat-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(229, 10, 10, 0.3);
  }

  .stat-item i {
    color: var(--gold);
    font-size: 1.5rem;
  }

  .character-content {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 1.5rem;
  }

  .lore-section,
  .abilities-section,
  .gallery-section {
    background: rgba(26, 26, 26, 0.7);
    padding: 1.2rem;
    border-radius: 10px;
    margin-bottom: 1.5rem;
    border: 1px solid var(--gray-medium);
  }

  .lore-section h2,
  .abilities-section h2,
  .gallery-section h2 {
    color: var(--gold);
    margin-bottom: 1rem;
    font-size: 1.8rem;
    display: flex;
    align-items: center;
    gap: 0.8rem;
  }

  .lore-text {
    line-height: 1.8;
    text-align: justify;
  }

  .abilities-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1.5rem;
  }

  .ability-card {
    background: rgba(10, 10, 10, 0.7);
    padding: 1.2rem;
    border-radius: 8px;
    border-left: 3px solid var(--crimson);
    transition: all 0.3s ease;
  }

  .ability-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(229, 10, 10, 0.2);
  }

  .ability-card h3 {
    color: var(--gold);
    margin-bottom: 0.5rem;
    font-size: 1.2rem;
  }

  .video-container {
    position: relative;
    padding-bottom: 56.25%;
    height: 0;
    overflow: hidden;
    margin-top: 1rem;
    border-radius: 5px;
  }

  .video-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
  }

  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
  }

  .gallery-item {
    position: relative;
    border-radius: 8px;
    overflow: hidden;
    height: 200px;
    transition: all 0.3s ease;
  }

  .gallery-item:hover {
    transform: scale(1.05);
    box-shadow: 0 0 20px rgba(229, 10, 10, 0.5);
  }

  .gallery-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .gallery-item:hover img {
    transform: scale(1.1);
  }

  .caption {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 0.5rem;
    margin: 0;
    text-align: center;
    font-size: 0.9rem;
  }

  /* Back Button */
  .back-button {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 2rem;
    color: var(--white);
    text-decoration: none;
    font-weight: bold;
    transition: all 0.3s ease;
    padding: 0.5rem 1rem;
    border-radius: 5px;
    background: rgba(229, 10, 10, 0.3);
  }

  .back-button:hover {
    background: var(--crimson);
    transform: translateX(-5px);
  }

  /* Loading State */
  .loading {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 50vh;
    flex-direction: column;
  }

  .spinner {
    width: 50px;
    height: 50px;
    border: 5px solid var(--gray-medium);
    border-top-color: var(--crimson);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 1rem;
  }

  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }

  /* Error State */
  .error-state {
    text-align: center;
    padding: 3rem;
    color: var(--crimson-light);
  }

  .error-state i {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  /* Responsive Design */
  @media (max-width: 992px) {
    .character-content {
      grid-template-columns: 1fr;
    }

    .character-image {
      height: 280px;
    }
  }

  @media (max-width: 768px) {
    .character-header {
      flex-direction: column;
      text-align: center;
      gap: 1rem;
    }

    .stats {
      justify-content: center;
      gap: 1rem;
    }

    .character-image {
      max-width: 100%;
    }
  }

  @media (max-width: 576px) {
    .character-info h1 {
      font-size: 2rem;
    }

    .abilities-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Weapons Section Styles */
  .weapons-section {
    margin: 1.5rem 0;
  }

  .weapons-section h3 {
    color: var(--gold);
    margin-bottom: 0.8rem;
    font-size: 1.3rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .weapons-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 0.8rem;
  }

  .weapon-tag {
    background: rgba(229, 10, 10, 0.2);
    border: 1px solid var(--crimson);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.9rem;
    transition: all 0.3s ease;
  }

  .weapon-tag:hover {
    background: var(--crimson);
    transform: translateY(-3px);
    box-shadow: 0 3px 10px rgba(229, 10, 10, 0.3);
  }

  /* Comments Section Styles */
  .comments-section {
    background: rgba(26, 26, 26, 0.7);
    padding: 1.5rem;
    border-radius: 10px;
    margin-top: 1.5rem;
    border: 1px solid var(--gray-medium);
  }

  .comments-section h2 {
    color: var(--gold);
    margin-bottom: 1.5rem;
    font-size: 1.8rem;
    display: flex;
    align-items: center;
    gap: 0.8rem;
  }

  .comment-form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .comment-form textarea,
  .comment-form input {
    padding: 0.8rem;
    border-radius: 5px;
    border: 1px solid var(--gray-medium);
    background: rgba(10, 10, 10, 0.8);
    color: var(--white);
    font-family: inherit;
  }

  .comment-form textarea {
    min-height: 100px;
    resize: vertical;
  }

  #submit-comment {
    align-self: flex-end;
    padding: 0.8rem 1.5rem;
    background: var(--crimson);
    border: none;
    border-radius: 5px;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  #submit-comment:hover {
    background: #d10000;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(229, 10, 10, 0.3);
  }

  .comments-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .comment-card {
    background: rgba(10, 10, 10, 0.8);
    padding: 1.2rem;
    border-radius: 8px;
    border-left: 3px solid var(--crimson);
    position: relative;
  }

  .comment-header {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    margin-bottom: 0.8rem;
  }

  .comment-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--crimson);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
  }

  .comment-author {
    font-weight: bold;
    color: var(--gold);
  }

  .comment-date {
    font-size: 0.8rem;
    color: var(--gray-light);
    margin-left: auto;
  }

  .comment-content {
    line-height: 1.6;
  }

  .no-comments {
    text-align: center;
    color: var(--gray-light);
    font-style: italic;
    padding: 2rem;
  }
</style>

<body>
  <!-- Header -->
  <header>
    <div class="header-container">
      <div class="logo">
        <h1><span class="devil">Devil</span> <span class="may">May</span> <span class="cry">Cry</span></h1>
        <p class="subtitle">Stylish Action Redefined</p>
      </div>
      <nav class="main-nav">
        <div class="hamburger" id="hamburger">
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
        </div>
        <ul class="nav-links" id="navLinks">
          <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
          <li><a href="characters.html"><i class="fas fa-users"></i> Characters</a></li>
          <li><a href="lore.html"><i class="fas fa-book"></i> Game Lore</a></li>
          <li><a href="quiz.html"><i class="fas fa-pizza-slice"></i> Pizza Time</a></li>
          <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Character Detail Section -->
  <main id="character-detail">
    <div class="container">
      <a href="characters.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Characters
      </a>

      <div id="character-loading" class="loading">
        <div class="spinner"></div>
        <p>Loading demonic data...</p>
      </div>

      <div id="character-content" style="display: none;">
        <div class="character-header">
          <div class="character-image">
            <img id="detail-image" src="" alt="Character Image">
            <div class="style-ranking">
              <span id="style-rank">SSS</span>
            </div>
          </div>
          <div class="character-info">
            <h1 id="character-name">Character Name</h1>
            <p class="role" id="character-role">Demon Hunter</p>
            <div class="weapons-section">
              <h3><i class="fas fa-gun"></i> Signature Weapons</h3>
              <div class="weapons-grid" id="character-weapons">
                <!-- Weapons will be inserted here -->
              </div>
            </div>

            <div class="stats">
              <div class="stat-box">
                <i class="fas fa-fist-raised"></i>
                <span id="power-stat">Power: 95%</span>
              </div>
              <div class="stat-box">
                <i class="fas fa-bolt"></i>
                <span id="speed-stat">Speed: 90%</span>
              </div>
              <div class="stat-box">
                <i class="fas fa-shield-alt"></i>
                <span id="defense-stat">Defense: 85%</span>
              </div>
            </div>
          </div>
        </div>

        <div class="character-content">
          <div class="lore-section">
            <h2><i class="fas fa-scroll"></i> Character Lore</h2>
            <div class="lore-text" id="character-lore"></div>
          </div>

          <div class="abilities-section">
            <h2><i class="fas fa-fire"></i> Signature Abilities</h2>
            <div class="abilities-grid" id="character-abilities"></div>
          </div>

          <div class="gallery-section">
            <h2><i class="fas fa-camera"></i> Gallery</h2>
            <div class="gallery-grid" id="character-gallery"></div>
          </div>
        </div>

        <!-- Add this right after the gallery-section div -->
        <div class="comments-section">
          <h2><i class="fas fa-comments"></i> Fan Comments</h2>
          <div class="comment-form">
            <textarea id="comment-text" placeholder="Share your thoughts about this character..." rows="3"></textarea>
            <input type="text" id="comment-name" placeholder="Your name (optional)">
            <button id="submit-comment" class="cta-button">Post Comment</button>
          </div>
          <div class="comments-list" id="comments-container">
            <!-- Comments will be dynamically inserted here -->
          </div>
        </div>

      </div>

      <div id="character-error" class="error-state" style="display: none;">
        <i class="fas fa-exclamation-triangle"></i>
        <h3>Demonic Disturbance Detected</h3>
        <p>We couldn't retrieve the character data. The underworld must be interfering.</p>
        <button id="retry-button" class="cta-button pulse" style="margin-top: 1rem;">
          <i class="fas fa-sync-alt"></i> Try Again
        </button>
      </div>
    </div>
  </main>

  <footer>
    <div class="footer-content">
      <div class="social-links">
        <a href="https://x.com/DevilMayCry" target="_blank"><i class="fab fa-twitter"></i></a>
        <a href="https://www.facebook.com/DMCPOCOFFICIAL/"target="_blank"><i class="fab fa-facebook"></i></a>
        <a href="https://www.instagram.com/devilmaycry_5/?hl=en"target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://www.youtube.com/devilmaycry"target="_blank"><i class="fab fa-youtube"></i></a>
      </div>
      <div class="footer-links">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Use</a>
        <a href="#">FAQ</a>
      </div>
      <p class="copyright">&copy; 2025 Devil May Cry Wiki. All rights reserved.</p>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Mobile menu toggle
      const hamburger = document.getElementById('hamburger');
      const navLinks = document.getElementById('navLinks');

      hamburger.addEventListener('click', () => {
        navLinks.classList.toggle('active');
        hamburger.classList.toggle('active');
      });

      // Get character name from URL
      const urlParams = new URLSearchParams(window.location.search);
      const characterName = decodeURIComponent(urlParams.get('name'));

      // Show loading state
      document.getElementById('character-loading').style.display = 'flex';
      document.getElementById('character-content').style.display = 'none';
      document.getElementById('character-error').style.display = 'none';

      // Fetch character data
      fetch('assets/js/data.json')
        .then(response => response.json())
        .then(data => {
          const character = data.characters.find(char => char.name === characterName);
          if (character) {
            displayCharacter(character);
            document.getElementById('character-loading').style.display = 'none';
            document.getElementById('character-content').style.display = 'block';
          } else {
            throw new Error('Character not found');
          }
        })
        .catch(error => {
          console.error('Error loading character data:', error);
          document.getElementById('character-loading').style.display = 'none';
          document.getElementById('character-error').style.display = 'block';
        });
    });

    function displayCharacter(character) {
      // Set basic info
      document.title = `${character.name} | Devil May Cry Wiki`;
      document.getElementById('character-name').textContent = character.name;
      document.getElementById('detail-image').src = character.image;
      document.getElementById('detail-image').alt = `${character.name} image`;
      document.getElementById('character-role').textContent = character.role;
      const detailSection = document.getElementById('character-detail');
      detailSection.className = ''; // Clear existing classes
      detailSection.classList.add(character.name.toLowerCase());
      const weaponsContainer = document.getElementById('character-weapons');
      if (character.weapons && character.weapons.length > 0) {
        weaponsContainer.innerHTML = character.weapons.map(weapon => `
      <div class="weapon-tag">
        <i class="fas fa-crosshairs"></i> ${weapon}
      </div>
    `).join('');
      } else {
        weaponsContainer.innerHTML = '<p>No signature weapons listed.</p>';
      }

      // Set lore - properly handle the lore.full property
      const loreElement = document.getElementById('character-lore');
      if (character.lore && character.lore.full) {
        loreElement.innerHTML = character.lore.full;
      } else {
        loreElement.innerHTML = '<p>No lore available for this character.</p>';
      }

      // Set stats if available
      if (character.lore && character.lore.stats) {
        document.getElementById('power-stat').textContent = `Power: ${character.lore.stats.power || 'N/A'}`;
        document.getElementById('speed-stat').textContent = `Speed: ${character.lore.stats.speed || 'N/A'}`;
        document.getElementById('defense-stat').textContent = `Defense: ${character.lore.stats.endurance || 'N/A'}`;
      }

      // Add abilities if available
      const abilitiesContainer = document.getElementById('character-abilities');
      if (character.lore && character.lore.abilities && character.lore.abilities.length > 0) {
        abilitiesContainer.innerHTML = character.lore.abilities.map(ability => `
          <div class="ability-card">
            <h3><i class="${ability.icon || 'fas fa-question'}"></i> ${ability.name}</h3>
            <p>${ability.description}</p>
          </div>
        `).join('');
      } else {
        abilitiesContainer.innerHTML = '<p>No abilities data available for this character.</p>';
      }

      // Add gallery if available
      const galleryContainer = document.getElementById('character-gallery');
      if (character.lore && character.lore.gallery && character.lore.gallery.length > 0) {
        galleryContainer.innerHTML = character.lore.gallery.map(image => `
          <div class="gallery-item">
            <img src="${image.image}" alt="${image.caption || character.name}" loading="lazy">
            ${image.caption ? `<p class="caption">${image.caption}</p>` : ''}
          </div>
        `).join('');
      } else {
        galleryContainer.innerHTML = '<p>No gallery images available for this character.</p>';
      }

      // Add lightbox functionality to gallery images
      addGalleryLightbox();
    }

    function addGalleryLightbox() {
      const galleryItems = document.querySelectorAll('.gallery-item img');
      galleryItems.forEach(img => {
        img.addEventListener('click', () => {
          // Create lightbox overlay
          const lightbox = document.createElement('div');
          lightbox.style.position = 'fixed';
          lightbox.style.top = '0';
          lightbox.style.left = '0';
          lightbox.style.width = '100%';
          lightbox.style.height = '100%';
          lightbox.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
          lightbox.style.display = 'flex';
          lightbox.style.justifyContent = 'center';
          lightbox.style.alignItems = 'center';
          lightbox.style.zIndex = '1000';
          lightbox.style.cursor = 'zoom-out';

          // Create image inside lightbox
          const lightboxImg = document.createElement('img');
          lightboxImg.src = img.src;
          lightboxImg.alt = img.alt;
          lightboxImg.style.maxHeight = '90vh';
          lightboxImg.style.maxWidth = '90vw';
          lightboxImg.style.objectFit = 'contain';

          // Add caption if available
          const caption = img.nextElementSibling;
          if (caption && caption.classList.contains('caption')) {
            const lightboxCaption = document.createElement('p');
            lightboxCaption.textContent = caption.textContent;
            lightboxCaption.style.position = 'absolute';
            lightboxCaption.style.bottom = '20px';
            lightboxCaption.style.color = 'white';
            lightboxCaption.style.textAlign = 'center';
            lightboxCaption.style.width = '100%';
            lightbox.appendChild(lightboxCaption);
          }

          lightbox.appendChild(lightboxImg);

          // Close lightbox on click
          lightbox.addEventListener('click', () => {
            document.body.removeChild(lightbox);
          });

          // Add to document
          document.body.appendChild(lightbox);
        });
      });
    }

    // Comment system functionality
  document.addEventListener('DOMContentLoaded', () => {
    // Initialize comments object in localStorage if not exists
    if (!localStorage.getItem('devilMayCryComments')) {
      localStorage.setItem('devilMayCryComments', JSON.stringify({}));
    }

    // Get character name from URL
    const urlParams = new URLSearchParams(window.location.search);
    const characterName = decodeURIComponent(urlParams.get('name'));

    // Load comments for this character
    loadComments(characterName);

    // Set up comment submission
    document.getElementById('submit-comment').addEventListener('click', () => {
      submitComment(characterName);
    });

    // Allow pressing Enter in textarea to submit (with Shift+Enter for new line)
    document.getElementById('comment-text').addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        submitComment(characterName);
      }
    });
  });

  function loadComments(characterName) {
    const commentsContainer = document.getElementById('comments-container');
    const commentsData = JSON.parse(localStorage.getItem('devilMayCryComments'));
    const characterComments = commentsData[characterName] || [];

    if (characterComments.length === 0) {
      commentsContainer.innerHTML = '<p class="no-comments">No comments yet. Be the first to share your thoughts!</p>';
      return;
    }

    // Sort comments by date (newest first)
    characterComments.sort((a, b) => new Date(b.date) - new Date(a.date));

    commentsContainer.innerHTML = characterComments.map(comment => `
      <div class="comment-card">
        <div class="comment-header">
          <div class="comment-avatar">${comment.name ? comment.name.charAt(0).toUpperCase() : '?'}</div>
          <span class="comment-author">${comment.name || 'Anonymous'}</span>
          <span class="comment-date">${formatDate(comment.date)}</span>
        </div>
        <div class="comment-content">${comment.text}</div>
      </div>
    `).join('');
  }

  function submitComment(characterName) {
    const commentText = document.getElementById('comment-text').value.trim();
    const commentName = document.getElementById('comment-name').value.trim();

    if (!commentText) {
      alert('Please enter a comment before submitting.');
      return;
    }

    // Get existing comments
    const commentsData = JSON.parse(localStorage.getItem('devilMayCryComments'));
    
    // Initialize character's comment array if it doesn't exist
    if (!commentsData[characterName]) {
      commentsData[characterName] = [];
    }

    // Add new comment
    commentsData[characterName].push({
      text: commentText,
      name: commentName || undefined, // Store as undefined if empty to display "Anonymous"
      date: new Date().toISOString()
    });

    // Save back to localStorage
    localStorage.setItem('devilMayCryComments', JSON.stringify(commentsData));

    // Clear form fields
    document.getElementById('comment-text').value = '';
    document.getElementById('comment-name').value = '';

    // Reload comments
    loadComments(characterName);
  }

  function formatDate(isoString) {
    const date = new Date(isoString);
    return date.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  }


  </script>
</body>

</html>